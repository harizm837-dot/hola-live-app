<!DOCTYPE html>
<html lang="mn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hola Live ¬∑ –î—ç–ª–≥“Ø“Ø—Ä</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Montserrat:wght@600;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #0b0f1a;
            --panel: #12182b;
            --glass: rgba(255, 255, 255, 0.08);
            --border: rgba(255, 255, 255, 0.15);
            --text: #eaf6ff;
            --muted: #9bb0c9;
            --accent: #7df9ff;
            --danger: #ff3344;
            --ok: #4dff88;
            --gold: #ffcf40;
            --accent-gradient: linear-gradient(90deg, #7df9ff, #00d2ff);
            --accent-glow: 0 0 25px rgba(125, 249, 255, 0.3);
        }

        body {
            margin: 0;
            font-family: 'Inter', sans-serif;
            background: radial-gradient(circle at top, #141b33, #05070f 65%);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .store-container {
            padding: 40px 20px;
            max-width: 900px;
            margin: 0 auto;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* üíé STORE HEADER */
        .store-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            background: linear-gradient(135deg, var(--panel), #1a223a);
            padding: 25px;
            border-radius: 28px;
            border: 1px solid var(--border);
            box-shadow: var(--accent-glow);
        }

        .store-title h2 { font-family: 'Montserrat', sans-serif; margin: 0; font-size: 24px; }
        .store-title p { font-size: 13px; color: var(--muted); margin: 0; }

        .user-wallet {
            background: var(--accent-gradient);
            color: #000;
            padding: 12px 25px;
            border-radius: 20px;
            font-weight: 800;
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 10px 20px rgba(125, 249, 255, 0.3);
        }

        /* üîñ TABS */
        .store-tabs {
            display: flex;
            gap: 12px;
            margin-bottom: 25px;
        }

        .tab-btn {
            flex: 1;
            padding: 14px;
            border-radius: 18px;
            border: 1px solid var(--border);
            background: var(--glass);
            color: var(--muted);
            font-weight: 700;
            cursor: pointer;
            transition: 0.3s;
        }

        .tab-btn.active {
            background: var(--accent);
            color: #000;
            border-color: var(--accent);
            box-shadow: 0 0 15px rgba(125, 249, 255, 0.4);
        }

        /* üõçÔ∏è GRID */
        .shop-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 20px;
        }

        .shop-card {
            background: var(--panel);
            border: 1px solid var(--border);
            border-radius: 30px;
            padding: 25px 20px;
            text-align: center;
            transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
        }

        .shop-card:hover {
            transform: translateY(-10px);
            border-color: var(--accent);
            box-shadow: var(--accent-glow);
        }

        .item-icon { font-size: 50px; margin-bottom: 15px; display: block; filter: drop-shadow(0 5px 10px rgba(0,0,0,0.3)); }
        .item-name { font-weight: 800; font-size: 16px; margin-bottom: 5px; color: #fff; }
        .item-price {
            font-family: 'Montserrat';
            color: var(--accent);
            font-weight: 800;
            font-size: 15px;
            background: rgba(125, 249, 255, 0.1);
            padding: 5px 12px;
            border-radius: 10px;
            display: inline-block;
            margin: 10px 0 20px;
        }

        .buy-btn {
            width: 100%;
            padding: 12px;
            border-radius: 15px;
            border: none;
            background: var(--glass);
            color: #fff;
            font-weight: 700;
            cursor: pointer;
            transition: 0.3s;
        }

        .shop-card:hover .buy-btn { background: var(--accent); color: #000; }

        .vip-tag {
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--gold);
            color: #000;
            font-size: 10px;
            padding: 4px 8px;
            border-radius: 8px;
            font-weight: 900;
            box-shadow: 0 0 15px rgba(255, 207, 64, 0.4);
        }

        /* üí≥ PAYMENT MODAL */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(8px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            animation: fadeIn 0.3s ease;
        }

        .payment-card {
            background: #12182b;
            width: 90%;
            max-width: 400px;
            border-radius: 32px;
            border: 1px solid var(--border);
            padding: 30px;
            position: relative;
        }

        .gateway-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px 20px;
            border-radius: 20px;
            background: var(--glass);
            border: 1px solid var(--border);
            cursor: pointer;
            margin-bottom: 12px;
            transition: 0.3s;
        }

        .gateway-item:hover { border-color: var(--accent); background: rgba(125, 249, 255, 0.1); }
        .gateway-logo { width: 40px; height: 40px; border-radius: 10px; }

        #qrSection { display: none; text-align: center; }
        .qr-placeholder { background: #fff; padding: 10px; border-radius: 15px; margin: 20px auto; width: 180px; }

    </style>
</head>
<body>

<div class="store-container">
    <div class="store-header">
        <div class="store-title">
            <h2>Hola Market</h2>
            <p>–¢–æ–∫–µ–Ω —Ü—ç–Ω—ç–≥–ª—ç—Ö –±–∞ –ë—ç–ª—ç–≥ –∞–≤–∞—Ö</p>
        </div>
        <div class="user-wallet">
            <span>üíé</span> <span id="walletDisp">0</span>
        </div>
    </div>

    <div class="store-tabs">
        <button class="tab-btn active" id="tokenTab" onclick="renderMarket('tokens', this)">üíé –¶—ç–Ω—ç–≥–ª—ç—Ö</button>
        <button class="tab-btn" onclick="renderMarket('gifts', this)">üéÅ –ë—ç–ª—ç–≥ –∞–≤–∞—Ö</button>
    </div>

    <div class="shop-grid" id="marketGrid"></div>
</div>

<div id="paymentModal" class="modal-overlay">
    <div class="payment-card">
        <button onclick="closePayment()" style="position:absolute; top:20px; right:20px; background:none; border:none; color:#fff; font-size:24px; cursor:pointer;">&times;</button>
        
        <div id="selectionSection">
            <h3 style="text-align:center; margin-top:0;">–¢”©–ª–±”©—Ä —Ç”©–ª”©—Ö</h3>
            <div style="background:rgba(255,255,255,0.05); padding:15px; border-radius:15px; margin-bottom:20px; display:flex; justify-content:space-between;">
                <div><span style="font-size:12px; color:var(--muted);">–ë–∞–≥—Ü:</span><br><b id="itemNameDisp" style="color:var(--accent);"></b></div>
                <div style="text-align:right;"><span style="font-size:12px; color:var(--muted);">–î“Ø–Ω:</span><br><b id="itemPriceDisp"></b></div>
            </div>

            <div class="gateway-item" onclick="showQR('QPay')">
                <img src="https://itools.mn/wp-content/uploads/2019/12/qpay.png" class="gateway-logo">
                <div><b>QPay</b><br><small style="color:var(--muted);">–ë“Ø—Ö –±–∞–Ω–∫–Ω—ã –∞–ø–ø</small></div>
            </div>
            <div class="gateway-item" onclick="showQR('SocialPay')">
                <img src="https://m.gala.mn/uploads/gala/socialpay.png" class="gateway-logo">
                <div><b>SocialPay</b><br><small style="color:var(--muted);">–ì–æ–ª–æ–º—Ç –±–∞–Ω–∫</small></div>
            </div>
        </div>

        <div id="qrSection">
            <h3 id="gatewayTitle">QR Code</h3>
            <div class="qr-placeholder">
                <img id="qrImg" src="https://api.qrserver.com/v1/create-qr-code/?size=160x160&data=HolaPayment" style="width:100%;">
            </div>
            <p style="color:var(--ok); font-size:12px;">üïí –¢”©–ª–±”©—Ä —Ö“Ø–ª—ç—ç–∂ –±–∞–π–Ω–∞...</p>
            <button class="buy-btn" onclick="backToSelection()">–ë—É—Ü–∞—Ö</button>
        </div>
    </div>
</div>

<script>
    const userState = {
        tokens: parseInt(localStorage.getItem('hola_wallet')) || 1200,
        isVIP: localStorage.getItem('is_vip') === 'true' || true
    };

    const shopData = {
        tokens: [
            { id: 't1', name: 'Starter Kit', amount: 100, price: 5000, icon: 'üíé' },
            { id: 't2', name: 'Pro Pack', amount: 1000, price: 45000, icon: 'üî•' },
            { id: 't3', name: 'Whale stash', amount: 5000, price: 200000, icon: 'üêã' }
        ],
        gifts: [
            { id: 'g1', name: '–°–∞—Ä–Ω–∞–π', price: 10, icon: 'üåπ' },
            { id: 'g2', name: '–°—É–ø–µ—Ä –ú–∞—à–∏–Ω', price: 2000, icon: 'üèéÔ∏è' },
            { id: 'g3', name: '–°–∞–Ω—Å—Ä—ã–Ω —Ö”©–ª”©–≥', price: 5000, icon: 'üöÄ' }
        ]
    };

    let currentItem = null;

    function refreshUI() {
        document.getElementById('walletDisp').innerText = userState.tokens.toLocaleString();
        localStorage.setItem('hola_wallet', userState.tokens);
    }

    function renderMarket(category, btn) {
        if(btn) {
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
        }
        
        const grid = document.getElementById('marketGrid');
        grid.innerHTML = '';

        shopData[category].forEach(item => {
            const isToken = category === 'tokens';
            let price = item.price;
            if(!isToken && userState.isVIP) price = Math.floor(price * 0.8);

            grid.innerHTML += `
                <div class="shop-card">
                    ${(!isToken && userState.isVIP) ? '<span class="vip-tag">VIP -20%</span>' : ''}
                    <span class="item-icon">${item.icon}</span>
                    <span class="item-name">${item.name}</span>
                    <span class="item-price">${isToken ? price.toLocaleString()+'‚ÇÆ' : 'üíé '+price}</span>
                    <button class="buy-btn" onclick="handleAction('${category}', '${item.id}')">
                        ${isToken ? '–¶—ç–Ω—ç–≥–ª—ç—Ö' : '–ê–≤–∞—Ö'}
                    </button>
                </div>
            `;
        });
    }

    function handleAction(category, id) {
        const item = shopData[category].find(i => i.id === id);
        if(category === 'tokens') {
            currentItem = item;
            document.getElementById('itemNameDisp').innerText = item.name;
            document.getElementById('itemPriceDisp').innerText = item.price.toLocaleString() + '‚ÇÆ';
            document.getElementById('paymentModal').style.display = 'flex';
        } else {
            let price = userState.isVIP ? Math.floor(item.price * 0.8) : item.price;
            if(userState.tokens >= price) {
                userState.tokens -= price;
                alert(`‚úÖ –ë–∞—è—Ä —Ö“Ø—Ä–≥—ç–µ! ${item.name} –∞–≤–ª–∞–∞.`);
                refreshUI();
            } else {
                alert('‚ùå –¢–æ–∫–µ–Ω —Ö“Ø—Ä—ç–ª—Ü—ç—Ö–≥“Ø–π –±–∞–π–Ω–∞!');
            }
        }
    }

    function showQR(gateway) {
        document.getElementById('selectionSection').style.display = 'none';
        document.getElementById('qrSection').style.display = 'block';
        document.getElementById('gatewayTitle').innerText = gateway + ' QR';
        
        // Simulation: Auto success after 4s
        setTimeout(() => {
            if(document.getElementById('qrSection').style.display === 'block') {
                userState.tokens += currentItem.amount;
                refreshUI();
                alert(`üíé –ê–º–∂–∏–ª—Ç—Ç–∞–π! ${currentItem.amount} —Ç–æ–∫–µ–Ω –Ω—ç–º—ç–≥–¥–ª—ç—ç.`);
                closePayment();
            }
        }, 4000);
    }

    function backToSelection() {
        document.getElementById('selectionSection').style.display = 'block';
        document.getElementById('qrSection').style.display = 'none';
    }

    function closePayment() {
        document.getElementById('paymentModal').style.display = 'none';
        backToSelection();
    }

    // Init
    refreshUI();
    renderMarket('tokens');
</script>

</body>
</html>
